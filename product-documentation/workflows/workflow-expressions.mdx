---
title: Workflow Expressions
description: Use conditional logic and catalog navigation to create dynamic, intelligent workflow behaviors
---

## Overview

Workflow expressions allow you to vary parts of a workflow based on conditions - making workflows adapt to different scenarios instead of requiring separate workflows for each case.

With expressions, you can:
- Navigate catalog relationships (Service → Team → Slack Channel)
- Apply conditional logic (If severity is Critical, then...)
- Return different values based on incident attributes
- Consolidate many similar workflows into one adaptive workflow

<Info>
**Before expressions:** Need 5 separate workflows - one for each team's on-call escalation

**With expressions:** One workflow that routes to the correct team based on affected service
</Info>

## Example use case

Escalate incidents to the specific on-call engineer for the affected product:

```text
IF Affected Service is "Payments":
  Escalation Team = Payments Team
  
ELSE IF Affected Service is "Onboarding":
  Escalation Team = Onboarding Team
  
ELSE:
  Escalation Team is not set
```text

Later in your workflow, use `Escalation Team` in an "Escalate to PagerDuty" step. The expression determines which team's on-call policy to page based on the affected service.

## Creating an expression

<Steps>
  <Step title="Open workflow editor">
    Navigate to [Workflows](https://app.incident.io/workflows) and create or edit a workflow
  </Step>
  
  <Step title="Start expression creation">
    In any workflow step or condition:
    1. Click "Use a variable"
    2. Select "Add new expression"
  </Step>
  
  <Step title="Choose expression type">
    Select the type of expression you need:
    
    <Tabs>
      <Tab title="If...else">
        Return different values based on conditions
        
        **Use for:**
        - Routing to different teams based on service
        - Choosing severity-specific escalation policies
        - Selecting channels based on impact
      </Tab>
      
      <Tab title="Catalog navigation">
        Follow relationships through catalog types
        
        **Use for:**
        - Service → Owning Team → Team Lead
        - Customer → Account Manager
        - Service → Monitoring Dashboard URL
      </Tab>
      
      <Tab title="Lookup">
        Find values in lists or collections
        
        **Use for:**
        - Finding specific team member by role
        - Selecting first available on-call
        - Filtering based on attributes
      </Tab>
    </Tabs>
  </Step>
  
  <Step title="Name the expression">
    Give it a short, descriptive name suggesting what it returns:
    
    ✅ Good names:
    - "Escalation Team"
    - "Notification Channel"
    - "Primary Stakeholder"
    
    ❌ Bad names:
    - "Expression 1"
    - "Team"
    - "Test"
  </Step>
  
  <Step title="Choose return type">
    Select what kind of value the expression returns:
    
    - **Slack Channel** - For posting messages
    - **User** - For invites or assignments
    - **Text** - For messages or notes
    - **PagerDuty Service** - For escalations
    - **Catalog entries** - Any catalog type
    - **Custom field values** - Specific field types
  </Step>
  
  <Step title="Configure multiple values">
    Choose whether the expression returns single or multiple values:
    
    - **Single value:** For steps expecting one item ("Send to Slack channel")
    - **Multiple values:** For loops or multi-select contexts
    
    <Note>
    Not all steps accept multiple values. If you return multiple values, the expression won't be available in steps that expect single values.
    </Note>
  </Step>
  
  <Step title="Define conditions and returns">
    Build your logic:
    
    1. Add a condition (e.g., "Affected Service is Payments")
    2. Specify what to return when the condition is true
    3. Add more conditions as needed
    4. Define default behavior (return nothing or a default value)
  </Step>
  
  <Step title="Set default behavior">
    Choose what happens when no conditions match:
    
    - **Return nothing:** Workflow skips steps that need this value
    - **Return default value:** Workflow continues with the fallback
    
    <Warning>
    If you return nothing and use the expression in a required field, the workflow will stop executing from that step onward.
    </Warning>
  </Step>
  
  <Step title="Save and use">
    Click "Add" to create the expression. It now appears in variable dropdowns throughout the workflow.
  </Step>
</Steps>

## Expression patterns

### Conditional routing

Route to different destinations based on incident attributes:

<CodeGroup>
```text Team-based channel selection
IF Affected Team is "Engineering":
  RETURN #engineering-incidents
  
ELSE IF Affected Team is "Product":
  RETURN #product-incidents
  
ELSE:
  RETURN #general-incidents
```text

```text Severity-based escalation
IF Severity is "Critical":
  RETURN Director On-call Policy
  
ELSE IF Severity is "High":
  RETURN Manager On-call Policy
  
ELSE:
  RETURN Team On-call Policy
```text

```text Customer tier notifications
IF Customer Tier is "Enterprise":
  RETURN #enterprise-support
  
ELSE IF Customer Tier is "Professional":
  RETURN #pro-support
  
ELSE:
  RETURN #standard-support
```text
</CodeGroup>

### Catalog navigation

Traverse relationships to find values:

<CodeGroup>
```text Find team from service
Affected Service → Owning Team

Returns: The team that owns the service
```text

```text Find on-call policy through hierarchy
Affected Service → Owning Team → Escalation Policy

Returns: The escalation policy for the team that owns the service
```text

```text Find stakeholder contact
Affected Customer → Account Manager → Slack Handle

Returns: The Slack handle of the customer's account manager
```text

```text Get monitoring resources
Affected Service → Monitoring Dashboard URL

Returns: Direct link to the service's dashboard
```text
</CodeGroup>

### Combined logic

Mix catalog navigation with conditional logic:

<CodeGroup>
```text Escalate based on service tier
IF Affected Service → Service Tier is "Critical":
  RETURN Affected Service → Owning Team → Director
  
ELSE:
  RETURN Affected Service → Owning Team → Team Lead
```text

```text Notify based on customer value
IF Affected Customer → Annual Value > $100,000:
  RETURN Affected Customer → Executive Sponsor
  
ELSE:
  RETURN Affected Customer → Account Manager
```text

```text Route by business hours
IF Current Time is between 9am-5pm:
  RETURN Affected Service → Owning Team → Slack Channel
  
ELSE:
  RETURN Affected Service → Owning Team → On-call Engineer
```text
</CodeGroup>

## Real-world examples

### Multi-team escalation

**Goal:** Route incidents to the correct team's on-call based on affected service

<Steps>
  <Step title="Create expression">
    - Name: "On-call Policy"
    - Type: If...else
    - Return type: PagerDuty Service
  </Step>
  
  <Step title="Define conditions">
    ```
    IF Affected Service is "API Gateway":
      RETURN Platform Team On-call
      
    ELSE IF Affected Service is "Payment Processor":
      RETURN Payments Team On-call
      
    ELSE IF Affected Service is "User Dashboard":
      RETURN Frontend Team On-call
      
    ELSE:
      RETURN Engineering Leadership On-call
    ```
  </Step>
  
  <Step title="Use in workflow">
    Add step: "Escalate to PagerDuty"
    - PagerDuty Service: Use expression "On-call Policy"
  </Step>
</Steps>

**Result:** One workflow handles escalation for all services, routing to the appropriate team automatically.

### Graduated stakeholder notification

**Goal:** Notify different people based on incident severity

<Steps>
  <Step title="Create expression">
    - Name: "Executive Stakeholder"
    - Type: If...else
    - Return type: User
  </Step>
  
  <Step title="Define severity-based logic">
    ```
    IF Severity is "Critical":
      RETURN CEO
      
    ELSE IF Severity is "High":
      RETURN VP Engineering
      
    ELSE:
      RETURN Engineering Manager
    ```
  </Step>
  
  <Step title="Use in workflow">
    Add step: "Send direct message"
    - To: Use expression "Executive Stakeholder"
    - Message: "FYI: {Severity} incident affecting {Affected Service}"
  </Step>
</Steps>

**Result:** Right level of leadership is notified based on severity without over-alerting.

### Customer communication routing

**Goal:** Route customer communications based on customer tier and impact

<Steps>
  <Step title="Create channel expression">
    - Name: "Customer Comms Channel"
    - Type: If...else
    - Return type: Slack Channel
  </Step>
  
  <Step title="Define routing logic">
    ```
    IF Affected Customers contains any with Tier = "Enterprise":
      RETURN #enterprise-customer-comms
      
    ELSE IF Severity is "Critical":
      RETURN #critical-customer-comms
      
    ELSE:
      RETURN #customer-comms
    ```
  </Step>
  
  <Step title="Create notification expression">
    - Name: "Account Managers to Notify"
    - Type: Catalog navigation
    - Return type: User (multiple)
  </Step>
  
  <Step title="Navigate catalog">
    ```
    Affected Customers → Account Manager
    
    Returns: All account managers for affected customers
    ```
  </Step>
  
  <Step title="Use in workflow">
    Step 1: Post to channel
    - Channel: Use expression "Customer Comms Channel"
    
    Step 2: Create loop
    - Loop over: Expression "Account Managers to Notify"
    - Send DM to each with customer impact details
  </Step>
</Steps>

**Result:** Customer communications automatically route to appropriate channels and notify relevant account managers.

### Dynamic resource links

**Goal:** Provide relevant dashboards and runbooks based on affected service

<Steps>
  <Step title="Create dashboard expression">
    - Name: "Monitoring Dashboard"
    - Type: Catalog navigation
    - Return type: Text
  </Step>
  
  <Step title="Navigate to dashboard">
    ```
    Affected Service → Monitoring Dashboard URL
    ```
  </Step>
  
  <Step title="Create runbook expression">
    - Name: "Incident Runbook"
    - Type: Catalog navigation
    - Return type: Text
  </Step>
  
  <Step title="Navigate to runbook">
    ```
    Affected Service → Runbook URL
    ```
  </Step>
  
  <Step title="Use in workflow">
    Add step: "Post message to incident channel" with a message containing:
    - Dashboard: Expression referencing "Monitoring Dashboard"
    - Runbook: Expression referencing "Incident Runbook"  
    - Team: Navigate from Affected Service to Owning Team to Slack Channel
  </Step>
</Steps>

**Result:** Every incident automatically has relevant monitoring and documentation links posted.

## Advanced techniques

### Fallback chains

Provide multiple fallback options:

```text
IF Affected Service → Primary On-call is set:
  RETURN Affected Service → Primary On-call
  
ELSE IF Affected Service → Owning Team → Team Lead is set:
  RETURN Affected Service → Owning Team → Team Lead
  
ELSE:
  RETURN Engineering Manager (default)
```text

**Use case:** Ensure someone is always contacted even if data is incomplete.

### Multiple condition logic

Combine multiple conditions with AND/OR:

```text
IF (Severity is "Critical" OR Severity is "High")
   AND Affected Service → Service Tier is "Customer-facing":
  RETURN #exec-team
  
ELSE IF Severity is "Critical":
  RETURN #engineering-leadership
  
ELSE:
  RETURN #general-incidents
```text

**Use case:** Complex routing based on multiple factors.

### Time-based routing

```text
IF Current time is between 6pm and 9am:
  RETURN Affected Service → After-hours On-call
  
ELSE:
  RETURN Affected Service → Business-hours Team
```text

**Use case:** Different escalation paths for business hours vs. off-hours.

### Aggregate calculations

```text
IF SUM(Affected Customers → Annual Value) > $1,000,000:
  RETURN VP Customer Success
  
ELSE:
  RETURN Customer Success Manager
```text

**Use case:** Escalate based on total customer value affected.

## Best practices

<AccordionGroup>
  <Accordion title="Name expressions clearly" icon="tag">
    Expression names should indicate what they return:
    
    ✅ Good:
    - "Escalation Policy"
    - "Notification Channel"
    - "Primary Responder"
    
    ❌ Bad:
    - "Expression 1"
    - "Value"
    - "Check"
  </Accordion>
  
  <Accordion title="Always provide defaults" icon="shield-check">
    Avoid workflow failures by setting sensible defaults:
    
    ```
    IF Affected Service → Owning Team is set:
      RETURN Affected Service → Owning Team
    ELSE:
      RETURN Engineering (default team)
    ```
    
    This prevents workflows from stopping when data is incomplete.
  </Accordion>
  
  <Accordion title="Test with edge cases" icon="vial">
    Test expressions with:
    - Empty or unset fields
    - Multiple values
    - Unexpected combinations
    - Missing catalog relationships
    
    Ensure graceful handling of all scenarios.
  </Accordion>
  
  <Accordion title="Keep logic simple" icon="sitemap">
    If an expression has more than 5-7 conditions, consider:
    - Breaking into multiple expressions
    - Restructuring catalog data
    - Using nested expressions
    
    Complex expressions are hard to maintain and debug.
  </Accordion>
  
  <Accordion title="Document complex expressions" icon="book">
    For intricate logic, add comments explaining:
    - Why each condition exists
    - What business rule it represents
    - Example scenarios
    - Edge case handling
  </Accordion>
  
  <Accordion title="Reuse expressions" icon="recycle">
    Once created, expressions are available across:
    - Multiple steps in the same workflow
    - Other workflows
    - Custom field automation
    
    Create reusable expressions for common patterns.
  </Accordion>
  
  <Accordion title="Match return types" icon="check-circle">
    Ensure expression return type matches where you'll use it:
    - Slack Channel expressions for message steps
    - User expressions for invite/assign steps
    - PagerDuty Service for escalation steps
    
    Mismatched types won't appear in dropdowns.
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Expression not available in dropdown" icon="list-slash">
    **Causes:**
    - Return type doesn't match what the step expects
    - Expression returns multiple values but step needs single value
    - Expression is defined in a different workflow
    
    **Solution:**
    - Check return type matches step requirement
    - Adjust multiple values setting
    - Recreate expression in this workflow (or make it reusable)
  </Accordion>
  
  <Accordion title="Expression returning nothing" icon="empty-set">
    **Causes:**
    - No conditions matched
    - Default is set to "return nothing"
    - Catalog relationship doesn't exist
    - Source field is unset
    
    **Solution:**
    - Check condition logic
    - Set a default value
    - Verify catalog data
    - Test with incidents where fields are populated
  </Accordion>
  
  <Accordion title="Workflow skipping steps" icon="forward-step">
    **Cause:** Expression returns nothing and step requires a value
    
    **Solution:**
    - Add default value to expression
    - Make step conditional (only run if expression returns value)
    - Check catalog data completeness
  </Accordion>
  
  <Accordion title="Wrong value returned" icon="circle-xmark">
    **Causes:**
    - Condition logic error
    - Catalog data incorrect
    - Wrong relationship path
    
    **Solution:**
    - Review condition order (first match wins)
    - Manually trace catalog path
    - Check catalog entries have correct relationships
    - Test expression with known-good incidents
  </Accordion>
  
  <Accordion title="Expression timing out" icon="clock">
    **Cause:** Very complex catalog navigation with many relationships
    
    **Solution:**
    - Simplify relationship path
    - Cache values in custom fields
    - Contact support if persistent
  </Accordion>
</AccordionGroup>

## Expression vs. automated custom field

When should you use a workflow expression vs. an automated custom field?

<Tabs>
  <Tab title="Use workflow expression">
    **When:**
    - Value is only needed for workflow logic
    - Value changes based on workflow context
    - Logic is workflow-specific
    - Value doesn't need to be visible on incident
    
    **Example:**
    - Which escalation policy to page
    - Where to post notifications
    - Who to send DMs to
  </Tab>
  
  <Tab title="Use automated custom field">
    **When:**
    - Value should be visible on incident
    - Multiple workflows need the same value
    - Value should appear in reporting
    - Logic is universal across all incidents
    
    **Example:**
    - Affected Team (derived from service)
    - Affected Division (derived from team)
    - Primary Stakeholder (derived from customer)
  </Tab>
  
  <Tab title="Use both">
    **Pattern:** Automated custom field + workflow expression
    
    1. Automated field derives base value (e.g., Affected Team)
    2. Workflow expression adds context (e.g., Team → Slack Channel)
    3. Workflow uses expression result
    
    **Benefit:**
    - Field visible for reporting
    - Expression provides additional derived values
    - Best of both approaches
  </Tab>
</Tabs>

## Next steps

<CardGroup cols={2}>
  <Card title="Workflows Overview" icon="workflow" href="/product-documentation/workflows/overview">
    Learn the fundamentals of workflow automation
  </Card>
  
  <Card title="Using Loops" icon="repeat" href="/help-centre/configure-your-account/workflows/using-loops-in-workflows">
    Repeat workflow steps for multiple values
  </Card>
  
  <Card title="Catalog Overview" icon="book" href="/product-documentation/catalog/overview">
    Understand catalog data that powers expressions
  </Card>
  
  <Card title="Custom Fields" icon="list-check" href="/product-documentation/catalog/custom-fields">
    Create automated custom fields as an alternative to expressions
  </Card>
</CardGroup>
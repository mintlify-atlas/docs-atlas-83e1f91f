---
title: Relationship Mapping and Automation
description: Connect catalog types together to model your organization's structure and enable powerful automation workflows
---

## Overview

Relationship mapping is what transforms Catalog from a simple directory into a powerful automation engine. By defining how catalog types relate to each other, you create a connected graph of your organization that incident.io can navigate to:

- Automatically derive custom field values
- Route incidents to the right teams
- Notify relevant stakeholders
- Power intelligent workflows

<Info>
**The power of relationships**

With proper relationship mapping, selecting "API Service" during incident declaration can automatically:
- Set affected team to "Backend Engineering"
- Page the team's on-call engineer
- Notify the service's product manager
- Post to the team's Slack channel
- Include the service owner in the incident

All from one field selection.
</Info>

## Types of relationships

Catalog supports several relationship patterns:

### One-to-one relationships

One catalog entry relates to exactly one other entry.

**Examples:**
- Service → Primary Owner (one service has one primary owner)
- Team → Team Lead (one team has one lead)
- Customer → Account Manager (one customer has one dedicated AM)

### One-to-many relationships

One catalog entry relates to multiple other entries.

**Examples:**
- Service → On-call Engineers (one service has multiple on-call people)
- Team → Team Members (one team has many members)
- Product → Features (one product contains many features)

### Many-to-many relationships

Multiple catalog entries can relate to multiple other entries.

**Examples:**
- Services ↔ Teams (services can be owned by multiple teams, teams can own multiple services)
- Stations ↔ Rail Lines (stations can serve multiple lines, lines go through multiple stations)
- Engineers ↔ Services (engineers can support multiple services, services have multiple supporting engineers)

## Building relationship hierarchies

The most powerful catalog structures use multiple levels of relationships:

<Steps>
  <Step title="Define your base types">
    Start with the fundamental entities in your organization:
    - Services or Features
    - Teams
    - People (if not using Slack users)
  </Step>
  
  <Step title="Add ownership relationships">
    Connect entities to their owners:
    - Service → Owning Team
    - Service → Technical Lead
    - Feature → Product Manager
  </Step>
  
  <Step title="Layer operational data">
    Add relationships for incident response:
    - Team → Escalation Policy
    - Team → Slack Channel
    - Service → Monitoring Dashboard
    - Service → Runbook
  </Step>
  
  <Step title="Add business context">
    Include relationships for stakeholder management:
    - Customer → Account Manager
    - Service → Product Area
    - Team → Executive Sponsor
  </Step>
</Steps>

## Example: E-commerce platform

Here's how an e-commerce company might structure their catalog:

```text
┌─────────────────┐
│   Products      │
└────────┬────────┘
         │ contains
         ▼
┌─────────────────┐      owned by     ┌─────────────────┐
│    Features     │ ─────────────────► │     Teams       │
└────────┬────────┘                    └────────┬────────┘
         │                                      │
         │ depends on                           │ has
         ▼                                      ▼
┌─────────────────┐                    ┌─────────────────┐
│    Services     │                    │ Escalation      │
│  (APIs, DBs)    │                    │    Policies     │
└────────┬────────┘                    └─────────────────┘
         │
         │ deployed to
         ▼
┌─────────────────┐
│   Environments  │
│ (Prod, Staging) │
└─────────────────┘
```text

**How this enables automation:**

1. Responder selects **Feature: "Checkout"** when declaring incident
2. System automatically derives:
   - **Owning Team:** Payments Team
   - **Escalation Policy:** Payments On-call
   - **Services:** Checkout API, Payment Processor, Order DB
   - **Slack Channel:** #payments-team
   - **Team Lead:** @sarah
3. Workflow automatically:
   - Pages Payments on-call via escalation policy
   - Posts to #payments-team
   - Invites @sarah to incident channel
   - Attaches links to monitoring dashboards for affected services

## Example: Rail network

A rail operator models their infrastructure to handle signal failures:

```text
┌───────────────────────┐
│ Signal Failure Point  │
└──────────┬────────────┘
           │ located on
           ▼
┌───────────────────────┐     serves      ┌─────────────────┐
│        Line           │ ────────────────► │    Stations     │
└──────────┬────────────┘                  └─────────────────┘
           │
           │ managed by
           ▼
┌───────────────────────┐     has          ┌─────────────────┐
│    Operations Team    │ ────────────────► │   Team Lead     │
└──────────┬────────────┘                  └─────────────────┘
           │
           │ uses
           ▼
┌───────────────────────┐
│  Status Page SubPage  │
└───────────────────────┘
```text

**Automation flow:**

1. Engineer selects **Signal Failure Point: "SFP-123"**
2. System navigates relationships:
   - SFP-123 → Northern Line
   - Northern Line → King's Cross, Euston, Camden stations
   - Northern Line → Northern Operations Team
   - Northern Ops → Team Lead: @james
   - Northern Line → Northern Line Status SubPage
3. Automated actions:
   - Dispatch Northern Operations Team
   - Notify @james
   - Post status update: "Delays between King's Cross and Camden"
   - Update Northern Line status subpage

## Creating relationships

### In the dashboard

<Steps>
  <Step title="Navigate to catalog">
    Go to [Catalog](https://app.incident.io/~/catalog) in your dashboard
  </Step>
  
  <Step title="Edit or create a catalog type">
    Select the type you want to add relationships to
  </Step>
  
  <Step title="Add attribute">
    Click "Add attribute" and choose the type:
    - Select another catalog type for a relationship
    - Choose whether it's single or multi-valued
  </Step>
  
  <Step title="Name the relationship">
    Give it a clear, descriptive name like "Owning Team" or "Team Members"
  </Step>
  
  <Step title="Populate the data">
    For each catalog entry, set the relationship values
  </Step>
</Steps>

### Via catalog importer

For larger datasets or complex relationships, use the [catalog importer](https://github.com/incident-io/catalog-importer):

<CodeGroup>
```yaml Example: Service with relationships
type: services
entries:
  - name: Checkout API
    attributes:
      owning_team: payments-team
      tech_lead: sarah@company.com
      on_call_policy: pagerduty-payments
      monitoring_dashboard: https://datadog.com/dashboard/checkout
      dependencies:
        - payment-processor
        - order-database
```text

```yaml Example: Team with relationships
type: teams
entries:
  - name: Payments Team
    attributes:
      team_lead: sarah@company.com
      slack_channel: "#payments-team"
      escalation_policy: pagerduty-payments
      division: Engineering
      function: Backend
      services:
        - checkout-api
        - payment-processor
```text
</CodeGroup>

### Via API

For programmatic control, use the [Catalog API](https://api-docs.incident.io/tag/Catalog-V2):

<CodeGroup>
```json Create catalog entry with relationships
POST /v2/catalog_types/{type_id}/entries
{
  "name": "Checkout API",
  "attribute_values": [
    {
      "catalog_attribute_id": "owning_team_attr_id",
      "value": {"catalog_entry_id": "payments_team_id"}
    },
    {
      "catalog_attribute_id": "dependencies_attr_id",
      "value": [
        {"catalog_entry_id": "payment_processor_id"},
        {"catalog_entry_id": "order_db_id"}
      ]
    }
  ]
}
```text
</CodeGroup>

## Using relationships in automation

### In automatic custom fields

Navigate relationships to derive values:

1. Create an automated custom field
2. Use the expression builder to navigate: `Affected Service → Owning Team → Team Lead`
3. The field automatically populates based on this path

See [Custom Fields](/product-documentation/catalog/custom-fields) for details.

### In workflows

Use relationships in workflow expressions:

1. Create a workflow with a condition or step
2. Click "Use variable" → "Add new expression"
3. Navigate catalog relationships: `Affected Customer → Account Manager`
4. Use the result in your workflow step (e.g., invite the account manager)

See [Workflows](/product-documentation/workflows/overview) for details.

### In workflow loops

Loop over multi-valued relationships:

1. Create a workflow loop
2. Loop over a catalog relationship (e.g., "Affected Service → Team Members")
3. Execute steps for each member (e.g., send individual notifications)

See [Using loops in workflows](/help-centre/configure-your-account/workflows/using-loops-in-workflows) for details.

## Best practices

<AccordionGroup>
  <Accordion title="Model real-world relationships" icon="sitemap">
    Structure your catalog to match how your organization actually works:
    - If services are truly owned by multiple teams, use many-to-many relationships
    - If there's always one clear owner, use one-to-one relationships
    - Mirror real responsibility and escalation paths
  </Accordion>
  
  <Accordion title="Keep relationships bidirectional" icon="arrows-left-right">
    When possible, create relationships in both directions:
    - Service → Owning Team
    - Team → Owned Services
    
    This enables more flexible automation and reporting.
  </Accordion>
  
  <Accordion title="Use consistent naming" icon="tag">
    Adopt clear naming conventions:
    - "Owning Team" (not "Team", "Owner", "Responsible Team")
    - "Team Members" (not "Members", "People", "Engineers")
    - "Escalation Policy" (not "On-call", "Paging Policy")
  </Accordion>
  
  <Accordion title="Start simple, iterate" icon="seedling">
    Begin with core relationships:
    1. Service → Team (week 1)
    2. Team → Escalation Policy (week 2)
    3. Service → Dependencies (week 3)
    4. Customer → Account Manager (week 4)
    
    Add complexity as you learn what's valuable.
  </Accordion>
  
  <Accordion title="Document your schema" icon="book">
    Maintain documentation of:
    - What each catalog type represents
    - What relationships exist and why
    - How to update the data
    - Examples of automation powered by each relationship
  </Accordion>
  
  <Accordion title="Validate data quality" icon="check-circle">
    Regularly audit:
    - Are all services assigned to teams?
    - Do all teams have escalation policies?
    - Are customer account managers up to date?
    
    Incomplete data breaks automation.
  </Accordion>
</AccordionGroup>

## Common patterns

### Service ownership hierarchy

```text
Service → Team → Division
        → Tech Lead
        → Product Manager
        → Escalation Policy
        → Slack Channel
```text

**Enables:**
- Auto-populate affected team from service
- Route escalations to correct policy
- Notify service owners
- Report on incidents by division

### Customer impact tracking

```text
Customer → Account Manager
        → Pricing Tier
        → Annual Value
        → Services Used
```text

**Enables:**
- Notify account managers of customer impact
- Prioritize by customer value
- Track which services affect which customers
- Report on customer-impacting incidents

### Infrastructure dependencies

```text
Service → Database
        → Cache
        → Message Queue
        → External APIs
```text

**Enables:**
- Identify cascading impact
- Link related incidents
- Provide dependency context in incident channel
- Track reliability of dependent services

## Troubleshooting

<AccordionGroup>
  <Accordion title="Circular dependencies" icon="arrows-spin">
    **Symptom:** Relationship loops (A → B → C → A)
    
    **Solution:** This is usually okay! Catalog handles circular relationships. Just ensure your automated fields and expressions terminate at a specific attribute.
  </Accordion>
  
  <Accordion title="Missing relationship data" icon="link-slash">
    **Symptom:** Automated fields not populating
    
    **Solution:** 
    - Check that the relationship exists in the catalog entry
    - Verify the attribute value is not empty
    - Use the catalog UI to trace the relationship path
  </Accordion>
  
  <Accordion title="Relationship not showing in expression builder" icon="eye-slash">
    **Symptom:** Can't find relationship when building expression
    
    **Solution:**
    - Ensure the attribute type matches what the expression expects
    - Check that the catalog type has the attribute defined
    - Verify you're starting from the correct catalog type
  </Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
  <Card title="Enrich Incidents" icon="sparkles" href="/product-documentation/catalog/enrich-incidents">
    Use catalog relationships to automatically enrich incidents
  </Card>
  
  <Card title="Custom Fields" icon="list-check" href="/product-documentation/catalog/custom-fields">
    Create automated custom fields using relationships
  </Card>
  
  <Card title="Workflows" icon="workflow" href="/product-documentation/workflows/overview">
    Build workflows that leverage catalog relationships
  </Card>
  
  <Card title="Catalog Importer" icon="download" href="https://github.com/incident-io/catalog-importer">
    Bulk import catalog data with relationships
  </Card>
</CardGroup>